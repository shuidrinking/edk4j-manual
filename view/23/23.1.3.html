<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link type="text/css"  rel="stylesheet" href="../../css/dom.css"/>
	<script type="text/javascript" src="../../javascript/components/google-code-prettify/prettify.js"></script>
	<script type="text/javascript" src="../../javascript/components/google-code-prettify/util.js"></script>
	<link rel="stylesheet" href="../../javascript/components/google-code-prettify/prettify.css" type="text/css"/>
	<script type="text/javascript" src="../../javascript/core/domUtil.js"></script>
	<script type="text/javascript">
		function init(){
			CodePrettyUtil.escapeInnerHTML('codeShow1', 'codeShow1');
			PR.prettyPrint();
		}
	</script>
</head>
<body onload="init()">
	<div id="title" class="titleDiv">
		23.1.3、配置日志文件
	</div>
	<div class="tabTitleDiv">配置log4j2.xml</div>
	<p class="tabTitleLine"></p>
	<div class="contentDiv">
		<p><b>traceId是贯穿一次请求的唯一标识,我们可以通过配置日志文件来输出traceId标识。</b></p>
		<label><b>只需要在日志格式中增加<font color="red">traceId:[%X{traceId}]</font>，如下：</b></label>
		<pre class="prettyprint" id="codeShow1" style="font-weight:bold;">
<PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss,SSS} %-5level %thread %c{1.} traceId:[%X{traceId}] - %msg%xEx%n"></PatternLayout>
		</pre>
		<p><b>配置了日志文件后，项目日志输出时就会自动带上traceId标识，<font color="red">所有参加一次链路调用的系统里，其traceId是一样的，这便于跟踪</font>。如下：</b></p>
		<div class="contentDiv">
			<img src="../../image/business/23/23.1.3-1.png" />
		</div>
	</div>
</body>
</html>